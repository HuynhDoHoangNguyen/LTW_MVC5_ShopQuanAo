@*@model WebsiteShopQuanAo.Models.SAN_PHAM

    @{
        ViewBag.Title = "Create";
    }


    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <h4>SAN_PHAM</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.MASP, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.MASP, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.MASP, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.TENSP, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.TENSP, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.TENSP, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.MADM, "MADM", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownList("MADM", null, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.MADM, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.MOTA, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.MOTA, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.MOTA, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.SOLUONGTON, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.SOLUONGTON, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.SOLUONGTON, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.TRANGTHAI, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <div class="checkbox">
                        @Html.EditorFor(model => model.TRANGTHAI)
                        @Html.ValidationMessageFor(model => model.TRANGTHAI, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Create" class="btn btn-default" />
                </div>
            </div>
        </div>
    }

    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>

    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>*@
@model WebsiteShopQuanAo.Models.SAN_PHAM

@{
    ViewBag.Title = "Thêm sản phẩm mới";
}

@section Styles {
    <link href="@Url.Content("~/Areas/Admin/Boot/css/admin-forms-complete.css")" rel="stylesheet" />
}

<div class="create-page-body">
    <div class="create-container">
        <div class="create-header">
            <div class="create-title-section">
                <h1 class="create-main-title">
                    <i class="fas fa-plus-circle"></i>
                    Thêm sản phẩm mới
                </h1>
                <p class="create-subtitle">Tạo sản phẩm mới cho cửa hàng của bạn</p>
                <a href="@Url.Action("StatusShop")" class="back-to-list-btn">
                    <i class="fas fa-arrow-left"></i> Quay lại danh sách
                </a>
            </div>
        </div>

        <div class="form-card-create">
            <div class="card-header-create">
                <h4><i class="fas fa-info-circle"></i> Thông tin sản phẩm</h4>
            </div>
            <div class="card-body-create">
                @* CẬP NHẬT: Thêm enctype để upload file *@
                @using (Html.BeginForm("Create", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true, "", new { @class = "validation-summary-create" })

                    <div class="form-horizontal-create">
                        <div class="form-group-create">
                            @Html.LabelFor(model => model.MASP, "Mã sản phẩm", htmlAttributes: new { @class = "control-label-create required" })
                            <div class="form-input-create">
                                @Html.EditorFor(model => model.MASP, new { htmlAttributes = new { @class = "form-control-create", placeholder = "VD: SP001" } })
                                @Html.ValidationMessageFor(model => model.MASP, "", new { @class = "text-danger-create" })
                            </div>
                        </div>

                        <div class="form-group-create">
                            @Html.LabelFor(model => model.TENSP, "Tên sản phẩm", htmlAttributes: new { @class = "control-label-create required" })
                            <div class="form-input-create">
                                @Html.EditorFor(model => model.TENSP, new { htmlAttributes = new { @class = "form-control-create", placeholder = "Nhập tên sản phẩm" } })
                                @Html.ValidationMessageFor(model => model.TENSP, "", new { @class = "text-danger-create" })
                            </div>
                        </div>

                        <div class="form-group-create">
                            @Html.LabelFor(model => model.MADM, "Danh mục", htmlAttributes: new { @class = "control-label-create required" })
                            <div class="form-input-create">
                                @Html.DropDownList("MADM", null, "-- Chọn danh mục --", htmlAttributes: new { @class = "form-control-create" })
                                @Html.ValidationMessageFor(model => model.MADM, "", new { @class = "text-danger-create" })
                            </div>
                        </div>

                        <div class="form-group-create">
                            <label class="control-label-create required">Hình ảnh sản phẩm</label>
                            <div class="form-input-create">
                                <input type="file" name="imageFile" class="form-control-create" accept="image/*" required />
                                <div class="form-hint">Chọn 1 hình ảnh đại diện cho sản phẩm</div>
                                <div id="image-preview-container" style="margin-top: 10px; display: none;">
                                    <img id="preview" src="#" alt="Xem trước" style="max-width: 150px; border-radius: 8px; border: 1px solid #ddd;" />
                                </div>
                            </div>
                        </div>

                        <div class="form-group-create">
                            @Html.LabelFor(model => model.SOLUONGTON, "Số lượng", htmlAttributes: new { @class = "control-label-create required" })
                            <div class="form-input-create">
                                @Html.EditorFor(model => model.SOLUONGTON, new { htmlAttributes = new { @class = "form-control-create", type = "number", min = "0" } })
                                @Html.ValidationMessageFor(model => model.SOLUONGTON, "", new { @class = "text-danger-create" })
                            </div>
                        </div>

                        <div class="form-group-create">
                            <label class="control-label-create">Trạng thái</label>
                            <div class="form-input-create">
                                <div class="checkbox-create">
                                    @Html.EditorFor(model => model.TRANGTHAI)
                                    <label for="TRANGTHAI">Kích hoạt sản phẩm</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group-create">
                            @Html.LabelFor(model => model.MOTA, "Mô tả", htmlAttributes: new { @class = "control-label-create" })
                            <div class="form-input-create">
                                @Html.TextAreaFor(model => model.MOTA, new { @class = "form-control-create", rows = "4", placeholder = "Mô tả chi tiết..." })
                                @Html.ValidationMessageFor(model => model.MOTA, "", new { @class = "text-danger-create" })
                            </div>
                        </div>

                        <div class="form-actions-create">
                            <a href="@Url.Action("StatusShop")" class="btn-create btn-create-secondary">Hủy bỏ</a>
                            <button type="submit" class="btn-create btn-create-primary">
                                <i class="fas fa-save"></i> Lưu sản phẩm
                            </button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Hiệu ứng focus
            $('.form-control-create').focus(function () {
                $(this).closest('.form-input-create').css('border-color', '#0088FF');
            }).blur(function () {
                $(this).closest('.form-input-create').css('border-color', '#e9ecef');
            });

            // Form submit loading
            $('form').submit(function (e) {
                if ($(this).valid()) {
                    var submitBtn = $(this).find('.btn-create-primary');
                    var originalText = submitBtn.html();

                    submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Đang xử lý...');
                    submitBtn.prop('disabled', true);

                    // Simulate loading (remove in production)
                    setTimeout(function () {
                        submitBtn.html(originalText);
                        submitBtn.prop('disabled', false);
                    }, 1500);
                }
            });

            // Number input validation
            $('input[type="number"]').on('input', function () {
                var value = parseInt($(this).val());
                if (value < 0) {
                    $(this).val(0);
                }
            });

            // Select dropdown styling
            $('select.form-control-create').each(function () {
                if ($(this).val()) {
                    $(this).css('color', '#0F172A');
                } else {
                    $(this).css('color', '#64748B');
                }
            }).change(function () {
                if ($(this).val()) {
                    $(this).css('color', '#0F172A');
                } else {
                    $(this).css('color', '#64748B');
                }
            });
        });
    </script>
}